import{d as P,_ as X,h as I,K as ae,u as le,r as h,j as N,a9 as ce,O as U,M as Q,n as j,o as M,v as re,aa as ue,a0 as G,a1 as fe,y as O,s as w,q as V,ab as ve,T as de,aM as ne,m as ie,Q as J,a2 as pe,f as C,e as me,l as Z,w as F,L as be,a8 as Se,bQ as he,D as Ee,$ as ee,ap as ye,U as Te,p as we,x as ge,ae as _e,aj as te,z as ze,ad as Y,F as K,bj as Le,bR as He}from"./index-Dww78Lxs.js";import{t as Re}from"./el-button-gmPuKkx2.js";import{b as Ne}from"./base-BYtbiKTB.js";const R=4,Ae={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ce=({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}),q=Symbol("scrollbarContextKey"),Me=P({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Oe="Thumb",De=I({__name:"thumb",props:Me,setup(e){const l=e,a=ae(q),o=le("scrollbar");a||Re(Oe,"can not inject scrollbar context");const r=h(),i=h(),d=h({}),p=h(!1);let c=!1,u=!1,m=0,E=0,n=ne?document.onselectstart:null;const t=N(()=>Ae[l.vertical?"vertical":"horizontal"]),S=N(()=>Ce({size:l.size,move:l.move,bar:t.value})),y=N(()=>r.value[t.value.offset]**2/a.wrapElement[t.value.scrollSize]/l.ratio/i.value[t.value.offset]),L=v=>{var T;if(v.stopPropagation(),v.ctrlKey||[1,2].includes(v.button))return;(T=window.getSelection())==null||T.removeAllRanges(),_(v);const b=v.currentTarget;b&&(d.value[t.value.axis]=b[t.value.offset]-(v[t.value.client]-b.getBoundingClientRect()[t.value.direction]))},g=v=>{if(!i.value||!r.value||!a.wrapElement)return;const T=Math.abs(v.target.getBoundingClientRect()[t.value.direction]-v[t.value.client]),b=i.value[t.value.offset]/2,s=(T-b)*100*y.value/r.value[t.value.offset];a.wrapElement[t.value.scroll]=s*a.wrapElement[t.value.scrollSize]/100},_=v=>{v.stopImmediatePropagation(),c=!0,m=a.wrapElement.scrollHeight,E=a.wrapElement.scrollWidth,document.addEventListener("mousemove",D),document.addEventListener("mouseup",A),n=document.onselectstart,document.onselectstart=()=>!1},D=v=>{if(!r.value||!i.value||c===!1)return;const T=d.value[t.value.axis];if(!T)return;const b=(r.value.getBoundingClientRect()[t.value.direction]-v[t.value.client])*-1,s=i.value[t.value.offset]-T,f=(b-s)*100*y.value/r.value[t.value.offset];t.value.scroll==="scrollLeft"?a.wrapElement[t.value.scroll]=f*E/100:a.wrapElement[t.value.scroll]=f*m/100},A=()=>{c=!1,d.value[t.value.axis]=0,document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",A),x(),u&&(p.value=!1)},$=()=>{u=!1,p.value=!!l.size},k=()=>{u=!0,p.value=c};ce(()=>{x(),document.removeEventListener("mouseup",A)});const x=()=>{document.onselectstart!==n&&(document.onselectstart=n)};return U(Q(a,"scrollbarElement"),"mousemove",$),U(Q(a,"scrollbarElement"),"mouseleave",k),(v,T)=>(M(),j(de,{name:w(o).b("fade"),persisted:""},{default:re(()=>[ue(G("div",{ref_key:"instance",ref:r,class:O([w(o).e("bar"),w(o).is(w(t).key)]),onMousedown:g,onClick:fe(()=>{},["stop"])},[G("div",{ref_key:"thumb",ref:i,class:O(w(o).e("thumb")),style:V(w(S)),onMousedown:L},null,38)],42,["onClick"]),[[ve,v.always||p.value]])]),_:1},8,["name"]))}});var oe=X(De,[["__file","thumb.vue"]]);const ke=P({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),xe=I({__name:"bar",props:ke,setup(e,{expose:l}){const a=e,o=ae(q),r=h(0),i=h(0),d=h(""),p=h(""),c=h(1),u=h(1);return l({handleScroll:n=>{if(n){const t=n.offsetHeight-R,S=n.offsetWidth-R;i.value=n.scrollTop*100/t*c.value,r.value=n.scrollLeft*100/S*u.value}},update:()=>{const n=o?.wrapElement;if(!n)return;const t=n.offsetHeight-R,S=n.offsetWidth-R,y=t**2/n.scrollHeight,L=S**2/n.scrollWidth,g=Math.max(y,a.minSize),_=Math.max(L,a.minSize);c.value=y/(t-y)/(g/(t-g)),u.value=L/(S-L)/(_/(S-_)),p.value=g+R<t?`${g}px`:"",d.value=_+R<S?`${_}px`:""}}),(n,t)=>(M(),ie(pe,null,[J(oe,{move:r.value,ratio:u.value,size:d.value,always:n.always},null,8,["move","ratio","size","always"]),J(oe,{move:i.value,ratio:c.value,size:p.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Be=X(xe,[["__file","bar.vue"]]);const We=P({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:me([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Ne(["ariaLabel","ariaOrientation"])}),Ye={"end-reached":e=>["left","right","top","bottom"].includes(e),scroll:({scrollTop:e,scrollLeft:l})=>[e,l].every(C)},Ie="ElScrollbar",$e=I({name:Ie}),Ke=I({...$e,props:We,emits:Ye,setup(e,{expose:l,emit:a}){const o=e,r=le("scrollbar");let i,d,p,c=0,u=0,m="";const E={bottom:!1,top:!1,right:!1,left:!1},n=h(),t=h(),S=h(),y=h(),L=N(()=>{const s={};return o.height&&(s.height=Z(o.height)),o.maxHeight&&(s.maxHeight=Z(o.maxHeight)),[o.wrapStyle,s]}),g=N(()=>[o.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!o.native}]),_=N(()=>[r.e("view"),o.viewClass]),D=s=>{var f;return(f=E[s])!=null?f:!1},A={top:"bottom",bottom:"top",left:"right",right:"left"},$=s=>{const f=A[m];if(!f)return;const H=s[m],B=s[f];H&&!E[m]&&(E[m]=!0),!B&&E[f]&&(E[f]=!1)},k=()=>{var s;if(t.value){(s=y.value)==null||s.handleScroll(t.value);const f=c,H=u;c=t.value.scrollTop,u=t.value.scrollLeft;const B={bottom:c+t.value.clientHeight>=t.value.scrollHeight-o.distance,top:c<=o.distance&&f!==0,right:u+t.value.clientWidth>=t.value.scrollWidth-o.distance&&H!==u,left:u<=o.distance&&H!==0};if(a("scroll",{scrollTop:c,scrollLeft:u}),f!==c&&(m=c>f?"bottom":"top"),H!==u&&(m=u>H?"right":"left"),o.distance>0){if(D(m))return;$(B)}B[m]&&a("end-reached",m)}};function x(s,f){_e(s)?t.value.scrollTo(s):C(s)&&C(f)&&t.value.scrollTo(s,f)}const v=s=>{C(s)&&(t.value.scrollTop=s)},T=s=>{C(s)&&(t.value.scrollLeft=s)},b=()=>{var s;(s=y.value)==null||s.update(),E[m]=!1};return F(()=>o.noresize,s=>{s?(i?.(),d?.(),p?.()):({stop:i}=te(S,b),{stop:d}=te(t,b),p=U("resize",b))},{immediate:!0}),F(()=>[o.maxHeight,o.height],()=>{o.native||ee(()=>{var s;b(),t.value&&((s=y.value)==null||s.handleScroll(t.value))})}),be(q,Se({scrollbarElement:n,wrapElement:t})),he(()=>{t.value&&(t.value.scrollTop=c,t.value.scrollLeft=u)}),Ee(()=>{o.native||ee(()=>{b()})}),ye(()=>b()),l({wrapRef:t,update:b,scrollTo:x,setScrollTop:v,setScrollLeft:T,handleScroll:k}),(s,f)=>(M(),ie("div",{ref_key:"scrollbarRef",ref:n,class:O(w(r).b())},[G("div",{ref_key:"wrapRef",ref:t,class:O(w(g)),style:V(w(L)),tabindex:s.tabindex,onScroll:k},[(M(),j(ge(s.tag),{id:s.id,ref_key:"resizeRef",ref:S,class:O(w(_)),style:V(s.viewStyle),role:s.role,"aria-label":s.ariaLabel,"aria-orientation":s.ariaOrientation},{default:re(()=>[we(s.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),s.native?Te("v-if",!0):(M(),j(Be,{key:0,ref_key:"barRef",ref:y,always:s.always,"min-size":s.minSize},null,8,["always","min-size"]))],2))}});var Ue=X(Ke,[["__file","scrollbar.vue"]]);const Xe=ze(Ue);var je=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(je||{});const W=e=>{const l=Y(e)?e:[e],a=[];return l.forEach(o=>{var r;Y(o)?a.push(...W(o)):K(o)&&((r=o.component)!=null&&r.subTree)?a.push(o,...W(o.component.subTree)):K(o)&&Y(o.children)?a.push(...W(o.children)):K(o)&&o.shapeFlag===2?a.push(...W(o.type())):a.push(o)}),a},z=new Map;if(ne){let e;document.addEventListener("mousedown",l=>e=l),document.addEventListener("mouseup",l=>{if(e){for(const a of z.values())for(const{documentHandler:o}of a)o(l,e);e=void 0}})}function se(e,l){let a=[];return Y(l.arg)?a=l.arg:Le(l.arg)&&a.push(l.arg),function(o,r){const i=l.instance.popperRef,d=o.target,p=r?.target,c=!l||!l.instance,u=!d||!p,m=e.contains(d)||e.contains(p),E=e===d,n=a.length&&a.some(S=>S?.contains(d))||a.length&&a.includes(p),t=i&&(i.contains(d)||i.contains(p));c||u||m||E||n||t||l.value(o,r)}}const qe={beforeMount(e,l){z.has(e)||z.set(e,[]),z.get(e).push({documentHandler:se(e,l),bindingFn:l.value})},updated(e,l){z.has(e)||z.set(e,[]);const a=z.get(e),o=a.findIndex(i=>i.bindingFn===l.oldValue),r={documentHandler:se(e,l),bindingFn:l.value};o>=0?a.splice(o,1,r):a.push(r)},unmounted(e){z.delete(e)}},Qe=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Je=e=>He(e);export{qe as C,Xe as E,je as P,Je as c,Qe as e,W as f,Ye as s};
