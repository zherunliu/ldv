import{Y as x,A,r as g,w,O as p,aB as C,s as f,$ as E}from"./index-Dww78Lxs.js";import{g as _}from"./base-BYtbiKTB.js";function R(l,{disabled:n,beforeFocus:e,afterFocus:r,beforeBlur:i,afterBlur:c}={}){const m=x(),{emit:o}=m,a=A(),u=g(!1),d=t=>{const s=C(e)?e(t):!1;f(n)||u.value||s||(u.value=!0,o("focus",t),r?.())},h=t=>{var s;const v=C(i)?i(t):!1;f(n)||t.relatedTarget&&((s=a.value)!=null&&s.contains(t.relatedTarget))||v||(u.value=!1,o("blur",t),c?.())},F=t=>{var s,v;f(n)||_(t.target)||(s=a.value)!=null&&s.contains(document.activeElement)&&a.value!==document.activeElement||(v=l.value)==null||v.focus()};return w([a,()=>f(n)],([t,s])=>{t&&(s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1"))}),p(a,"focus",d,!0),p(a,"blur",h,!0),p(a,"click",F,!0),{isFocused:u,wrapperRef:a,handleFocus:d,handleBlur:h}}const b=l=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(l);function y({afterComposition:l,emit:n}){const e=g(!1),r=o=>{n?.("compositionstart",o),e.value=!0},i=o=>{var a;n?.("compositionupdate",o);const u=(a=o.target)==null?void 0:a.value,d=u[u.length-1]||"";e.value=!b(d)},c=o=>{n?.("compositionend",o),e.value&&(e.value=!1,E(()=>l(o)))};return{isComposing:e,handleComposition:o=>{o.type==="compositionend"?c(o):i(o)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:c}}export{y as a,R as u};
