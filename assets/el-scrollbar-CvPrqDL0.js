import{cu as oe,bv as V,b as K,_ as U,e as W,y as te,u as ae,r as m,f as k,A as re,H as I,F as X,k as $,o as R,p as le,a5 as ne,U as D,V as ie,s as B,m as z,n as j,a6 as ce,Y as ue,b8 as fe,j as se,K as q,W as ve,a as L,d as de,h as F,w as G,B as me,a3 as pe,bm as he,z as be,I as J,an as ye,N as ge,l as Se,q as we,a9 as ze,ae as Q,t as _e}from"./index-DNL56yZ_.js";import{t as Ee}from"./event-WhKTvZKo.js";import{u as He}from"./aria-D7O-RZyP.js";var Te=/\s/;function Ne(a){for(var o=a.length;o--&&Te.test(a.charAt(o)););return o}var ke=/^\s+/;function Ce(a){return a&&a.slice(0,Ne(a)+1).replace(ke,"")}var Z=NaN,Le=/^[-+]0x[0-9a-f]+$/i,Re=/^0b[01]+$/i,Be=/^0o[0-7]+$/i,Pe=parseInt;function Je(a){if(typeof a=="number")return a;if(oe(a))return Z;if(V(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=V(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=Ce(a);var s=Re.test(a);return s||Be.test(a)?Pe(a.slice(2),s?2:8):Le.test(a)?Z:+a}const N=4,xe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Oe=({move:a,size:o,bar:s})=>({[s.size]:o,transform:`translate${s.axis}(${a}%)`}),Y=Symbol("scrollbarContextKey"),Ae=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),We="Thumb",Me=W({__name:"thumb",props:Ae,setup(a){const o=a,s=te(Y),l=ae("scrollbar");s||Ee(We,"can not inject scrollbar context");const f=m(),p=m(),g=m({}),h=m(!1);let i=!1,c=!1,d=0,S=0,r=fe?document.onselectstart:null;const e=k(()=>xe[o.vertical?"vertical":"horizontal"]),b=k(()=>Oe({size:o.size,move:o.move,bar:e.value})),y=k(()=>f.value[e.value.offset]**2/s.wrapElement[e.value.scrollSize]/o.ratio/p.value[e.value.offset]),H=u=>{var w;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(w=window.getSelection())==null||w.removeAllRanges(),E(u);const v=u.currentTarget;v&&(g.value[e.value.axis]=v[e.value.offset]-(u[e.value.client]-v.getBoundingClientRect()[e.value.direction]))},_=u=>{if(!p.value||!f.value||!s.wrapElement)return;const w=Math.abs(u.target.getBoundingClientRect()[e.value.direction]-u[e.value.client]),v=p.value[e.value.offset]/2,t=(w-v)*100*y.value/f.value[e.value.offset];s.wrapElement[e.value.scroll]=t*s.wrapElement[e.value.scrollSize]/100},E=u=>{u.stopImmediatePropagation(),i=!0,d=s.wrapElement.scrollHeight,S=s.wrapElement.scrollWidth,document.addEventListener("mousemove",P),document.addEventListener("mouseup",C),r=document.onselectstart,document.onselectstart=()=>!1},P=u=>{if(!f.value||!p.value||i===!1)return;const w=g.value[e.value.axis];if(!w)return;const v=(f.value.getBoundingClientRect()[e.value.direction]-u[e.value.client])*-1,t=p.value[e.value.offset]-w,n=(v-t)*100*y.value/f.value[e.value.offset];e.value.scroll==="scrollLeft"?s.wrapElement[e.value.scroll]=n*S/100:s.wrapElement[e.value.scroll]=n*d/100},C=()=>{i=!1,g.value[e.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",C),O(),c&&(h.value=!1)},M=()=>{c=!1,h.value=!!o.size},x=()=>{c=!0,h.value=i};re(()=>{O(),document.removeEventListener("mouseup",C)});const O=()=>{document.onselectstart!==r&&(document.onselectstart=r)};return I(X(s,"scrollbarElement"),"mousemove",M),I(X(s,"scrollbarElement"),"mouseleave",x),(u,w)=>(R(),$(ue,{name:z(l).b("fade"),persisted:""},{default:le(()=>[ne(D("div",{ref_key:"instance",ref:f,class:B([z(l).e("bar"),z(l).is(z(e).key)]),onMousedown:_,onClick:ie(()=>{},["stop"])},[D("div",{ref_key:"thumb",ref:p,class:B(z(l).e("thumb")),style:j(z(b)),onMousedown:H},null,38)],42,["onClick"]),[[ce,u.always||h.value]])]),_:1},8,["name"]))}});var ee=U(Me,[["__file","thumb.vue"]]);const Ie=K({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),$e=W({__name:"bar",props:Ie,setup(a,{expose:o}){const s=a,l=te(Y),f=m(0),p=m(0),g=m(""),h=m(""),i=m(1),c=m(1);return o({handleScroll:r=>{if(r){const e=r.offsetHeight-N,b=r.offsetWidth-N;p.value=r.scrollTop*100/e*i.value,f.value=r.scrollLeft*100/b*c.value}},update:()=>{const r=l?.wrapElement;if(!r)return;const e=r.offsetHeight-N,b=r.offsetWidth-N,y=e**2/r.scrollHeight,H=b**2/r.scrollWidth,_=Math.max(y,s.minSize),E=Math.max(H,s.minSize);i.value=y/(e-y)/(_/(e-_)),c.value=H/(b-H)/(E/(b-E)),h.value=_+N<e?`${_}px`:"",g.value=E+N<b?`${E}px`:""}}),(r,e)=>(R(),se(ve,null,[q(ee,{move:f.value,ratio:c.value,size:g.value,always:r.always},null,8,["move","ratio","size","always"]),q(ee,{move:p.value,ratio:i.value,size:h.value,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var De=U($e,[["__file","bar.vue"]]);const je=K({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:de([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...He(["ariaLabel","ariaOrientation"])}),Ke={"end-reached":a=>["left","right","top","bottom"].includes(a),scroll:({scrollTop:a,scrollLeft:o})=>[a,o].every(L)},Ue="ElScrollbar",Ye=W({name:Ue}),Ve=W({...Ye,props:je,emits:Ke,setup(a,{expose:o,emit:s}){const l=a,f=ae("scrollbar");let p,g,h,i=0,c=0,d="";const S={bottom:!1,top:!1,right:!1,left:!1},r=m(),e=m(),b=m(),y=m(),H=k(()=>{const t={};return l.height&&(t.height=F(l.height)),l.maxHeight&&(t.maxHeight=F(l.maxHeight)),[l.wrapStyle,t]}),_=k(()=>[l.wrapClass,f.e("wrap"),{[f.em("wrap","hidden-default")]:!l.native}]),E=k(()=>[f.e("view"),l.viewClass]),P=t=>{var n;return(n=S[t])!=null?n:!1},C={top:"bottom",bottom:"top",left:"right",right:"left"},M=t=>{const n=C[d];if(!n)return;const T=t[d],A=t[n];T&&!S[d]&&(S[d]=!0),!A&&S[n]&&(S[n]=!1)},x=()=>{var t;if(e.value){(t=y.value)==null||t.handleScroll(e.value);const n=i,T=c;i=e.value.scrollTop,c=e.value.scrollLeft;const A={bottom:i+e.value.clientHeight>=e.value.scrollHeight-l.distance,top:i<=l.distance&&n!==0,right:c+e.value.clientWidth>=e.value.scrollWidth-l.distance&&T!==c,left:c<=l.distance&&T!==0};if(s("scroll",{scrollTop:i,scrollLeft:c}),n!==i&&(d=i>n?"bottom":"top"),T!==c&&(d=c>T?"right":"left"),l.distance>0){if(P(d))return;M(A)}A[d]&&s("end-reached",d)}};function O(t,n){ze(t)?e.value.scrollTo(t):L(t)&&L(n)&&e.value.scrollTo(t,n)}const u=t=>{L(t)&&(e.value.scrollTop=t)},w=t=>{L(t)&&(e.value.scrollLeft=t)},v=()=>{var t;(t=y.value)==null||t.update(),S[d]=!1};return G(()=>l.noresize,t=>{t?(p?.(),g?.(),h?.()):({stop:p}=Q(b,v),{stop:g}=Q(e,v),h=I("resize",v))},{immediate:!0}),G(()=>[l.maxHeight,l.height],()=>{l.native||J(()=>{var t;v(),e.value&&((t=y.value)==null||t.handleScroll(e.value))})}),me(Y,pe({scrollbarElement:r,wrapElement:e})),he(()=>{e.value&&(e.value.scrollTop=i,e.value.scrollLeft=c)}),be(()=>{l.native||J(()=>{v()})}),ye(()=>v()),o({wrapRef:e,update:v,scrollTo:O,setScrollTop:u,setScrollLeft:w,handleScroll:x}),(t,n)=>(R(),se("div",{ref_key:"scrollbarRef",ref:r,class:B(z(f).b())},[D("div",{ref_key:"wrapRef",ref:e,class:B(z(_)),style:j(z(H)),tabindex:t.tabindex,onScroll:x},[(R(),$(we(t.tag),{id:t.id,ref_key:"resizeRef",ref:b,class:B(z(E)),style:j(t.viewStyle),role:t.role,"aria-label":t.ariaLabel,"aria-orientation":t.ariaOrientation},{default:le(()=>[Se(t.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),t.native?ge("v-if",!0):(R(),$(De,{key:0,ref_key:"barRef",ref:y,always:t.always,"min-size":t.minSize},null,8,["always","min-size"]))],2))}});var Xe=U(Ve,[["__file","scrollbar.vue"]]);const Qe=_e(Xe);export{Qe as E,Ke as s,Je as t};
