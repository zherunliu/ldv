import{b3 as k,e as ue,b as D,u as re,K as ie,a4 as ce,l as U,d as b,i as de,bg as fe,S as ve,bs as ye,r as C,bt as me,f as i,bu as ge,h as Ce,a9 as be,a8 as pe,aB as $,w,z as Se,a7 as G,b8 as _e,I as Be}from"./index-DNL56yZ_.js";import{P as h}from"./vnode-BSFz-22H.js";import{t as Ee}from"./el-popper-DB-QFI-H.js";import{U as Y}from"./event-WhKTvZKo.js";import{u as Ie}from"./index-BvIgyUJ_.js";import{u as Z}from"./index-C9txI7Rn.js";const xe=e=>{if(!e)return{onClick:k,onMousedown:k,onMouseup:k};let l=!1,r=!1;return{onClick:t=>{l&&r&&e(t),l=r=!1},onMousedown:t=>{l=t.target===t.currentTarget},onMouseup:t=>{r=t.target===t.currentTarget}}},Oe=D({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:b([String,Array,Object])},zIndex:{type:b([String,Number])}}),Te={click:e=>e instanceof MouseEvent},Ae="overlay";var Me=ue({name:"ElOverlay",props:Oe,emits:Te,setup(e,{slots:l,emit:r}){const p=re(Ae),s=_=>{r("click",_)},{onClick:d,onMousedown:t,onMouseup:S}=xe(e.customMaskEvent?void 0:s);return()=>e.mask?ie("div",{class:[p.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:t,onMouseup:S},[U(l,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):ce("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[U(l,"default")])}});const ze=Me,Ne=Symbol("dialogInjectionKey"),q="dialog-fade",Pe=D({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:de},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),je={close:()=>!0},Ve=D({...Pe,appendToBody:Boolean,appendTo:{type:Ee.to.type,default:"body"},beforeClose:{type:b(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:b([String,Object]),default:void 0}}),Ke={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Y]:e=>fe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ue=(e,l)=>{var r;const s=ve().emit,{nextZIndex:d}=ye();let t="";const S=Z(),_=Z(),c=C(!1),B=C(!1),y=C(!1),E=C((r=e.zIndex)!=null?r:d());let f,v;const F=me(),J=i(()=>{var o,n;return(n=(o=F.value)==null?void 0:o.namespace)!=null?n:ge}),m=i(()=>{var o;return(o=F.value)==null?void 0:o.dialog}),Q=i(()=>{const o={},n=`--${J.value}-dialog`;return e.fullscreen||(e.top&&(o[`${n}-margin-top`]=e.top),e.width&&(o[`${n}-width`]=Ce(e.width))),o}),W=i(()=>{var o,n,a;return((a=(n=e.draggable)!=null?n:(o=m.value)==null?void 0:o.draggable)!=null?a:!1)&&!e.fullscreen}),z=i(()=>{var o,n,a;return(a=(n=e.alignCenter)!=null?n:(o=m.value)==null?void 0:o.alignCenter)!=null?a:!1}),X=i(()=>{var o,n,a;return(a=(n=e.overflow)!=null?n:(o=m.value)==null?void 0:o.overflow)!=null?a:!1}),H=i(()=>z.value?{display:"flex"}:{}),R=i(()=>{var o,n,a;const P=(a=(n=e.transition)!=null?n:(o=m.value)==null?void 0:o.transition)!=null?a:q,ae={name:P,onAfterEnter:I,onBeforeLeave:O,onAfterLeave:x};if(be(P)){const u={...P},L=(g,se)=>V=>{pe(g)?g.forEach(K=>{$(K)&&K(V)}):$(g)&&g(V),se()};return u.onAfterEnter=L(u.onAfterEnter,I),u.onBeforeLeave=L(u.onBeforeLeave,O),u.onAfterLeave=L(u.onAfterLeave,x),u.name||(u.name=q),u}return ae});function I(){s("opened")}function x(){s("closed"),s(Y,!1),e.destroyOnClose&&(y.value=!1)}function O(){s("close")}function N(){v?.(),f?.(),e.openDelay&&e.openDelay>0?{stop:f}=G(()=>j(),e.openDelay):j()}function T(){f?.(),v?.(),e.closeDelay&&e.closeDelay>0?{stop:v}=G(()=>M(),e.closeDelay):M()}function A(){function o(n){n||(B.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(o):T()}function ee(){e.closeOnClickModal&&A()}function j(){_e&&(c.value=!0)}function M(){c.value=!1}function oe(){s("openAutoFocus")}function ne(){s("closeAutoFocus")}function le(o){var n;((n=o.detail)==null?void 0:n.focusReason)==="pointer"&&o.preventDefault()}e.lockScroll&&Ie(c);function te(){e.closeOnPressEscape&&A()}return w(()=>e.zIndex,()=>{var o;E.value=(o=e.zIndex)!=null?o:d()}),w(()=>e.modelValue,o=>{var n;o?(B.value=!1,N(),y.value=!0,E.value=(n=e.zIndex)!=null?n:d(),Be(()=>{s("open"),l.value&&(l.value.parentElement.scrollTop=0,l.value.parentElement.scrollLeft=0,l.value.scrollTop=0)})):c.value&&T()}),w(()=>e.fullscreen,o=>{l.value&&(o?(t=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=t)}),Se(()=>{e.modelValue&&(c.value=!0,y.value=!0,N())}),{afterEnter:I,afterLeave:x,beforeLeave:O,handleClose:A,onModalClick:ee,close:T,doClose:M,onOpenAutoFocus:oe,onCloseAutoFocus:ne,onCloseRequested:te,onFocusoutPrevented:le,titleId:S,bodyId:_,closed:B,style:Q,overlayDialogStyle:H,rendered:y,visible:c,zIndex:E,transitionConfig:R,_draggable:W,_alignCenter:z,_overflow:X}};export{ze as E,Ve as a,je as b,Pe as c,Ke as d,Ne as e,xe as f,Ue as u};
