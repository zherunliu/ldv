import"./base-CKizj23g.js";import{E as te}from"./el-button-jLyDYas5.js";import{b as L,a as M,_ as O,e as B,u as U,w as D,j as c,o as n,l as N,K as b,m as e,s as o,S as G,B as ae,i as ne,r as I,y as re,z as le,f as v,A as ie,N as h,U as w,n as j,k as E,p as k,q as oe,E as x,ce as ue,aq as ce,ah as P,ag as T,t as pe,x as ve,aE as de,W as q,au as F}from"./index-DNL56yZ_.js";import{C as H}from"./event-WhKTvZKo.js";import{u as me}from"./index-BdhPJIIF.js";const fe=L({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Se={[H]:(f,S)=>[f,S].every(M)},J="ElSteps",ye=B({name:"ElSteps"}),_e=B({...ye,props:fe,emits:Se,setup(f,{emit:S}){const a=f,r=U("steps"),{children:d,addChild:p,removeChild:s,ChildrenSorter:y}=me(G(),"ElStep");return D(d,()=>{d.value.forEach((i,l)=>{i.setIndex(l)})}),ae(J,{props:a,steps:d,addStep:p,removeStep:s}),D(()=>a.active,(i,l)=>{S(H,i,l)}),(i,l)=>(n(),c("div",{class:o([e(r).b(),e(r).m(i.simple?"simple":i.direction)])},[N(i.$slots,"default"),b(e(y))],2))}});var he=O(_e,[["__file","steps.vue"]]);const ge=L({title:{type:String,default:""},icon:{type:ne},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Ce=B({name:"ElStep"}),Ee=B({...Ce,props:ge,setup(f){const S=f,a=U("step"),r=I(-1),d=I({}),p=I(""),s=re(J),y=G();let i=0,l=0;le(()=>{D([()=>s.props.active,()=>s.props.processStatus,()=>s.props.finishStatus],([t],[_])=>{l=_||0,i=t-l,se(t)},{immediate:!0})});const m=v(()=>S.status||p.value),V=v(()=>{const t=s.steps.value[r.value-1];return t?t.internalStatus.value:"wait"}),g=v(()=>s.props.alignCenter),C=v(()=>s.props.direction==="vertical"),u=v(()=>s.props.simple),z=v(()=>s.steps.value.length),W=v(()=>{var t;return((t=s.steps.value[z.value-1])==null?void 0:t.uid)===y.uid}),$=v(()=>u.value?"":s.props.space),Q=v(()=>[a.b(),a.is(u.value?"simple":s.props.direction),a.is("flex",W.value&&!$.value&&!g.value),a.is("center",g.value&&!C.value&&!u.value)]),X=v(()=>{const t={flexBasis:M($.value)?`${$.value}px`:$.value?$.value:`${100/(z.value-(g.value?0:1))}%`};return C.value||W.value&&(t.maxWidth=`${100/z.value}%`),t}),Z=t=>{r.value=t},ee=t=>{const _=t==="wait",R={transitionDelay:`${Math.abs(i)===1?0:i>0?(r.value+1-l)*150:-(r.value+1-s.props.active)*150}ms`},K=t===s.props.processStatus||_?0:100;R.borderWidth=K&&!u.value?"1px":0,R[s.props.direction==="vertical"?"height":"width"]=`${K}%`,d.value=R},se=t=>{t>r.value?p.value=s.props.finishStatus:t===r.value&&V.value!=="error"?p.value=s.props.processStatus:p.value="wait";const _=s.steps.value[r.value-1];_&&_.calcProgress(p.value)},A={uid:y.uid,getVnode:()=>y.vnode,currentStatus:m,internalStatus:p,setIndex:Z,calcProgress:ee};return s.addStep(A),ie(()=>{s.removeStep(A)}),(t,_)=>(n(),c("div",{style:j(e(X)),class:o(e(Q))},[h(" icon & line "),w("div",{class:o([e(a).e("head"),e(a).is(e(m))])},[e(u)?h("v-if",!0):(n(),c("div",{key:0,class:o(e(a).e("line"))},[w("i",{class:o(e(a).e("line-inner")),style:j(d.value)},null,6)],2)),w("div",{class:o([e(a).e("icon"),e(a).is(t.icon||t.$slots.icon?"icon":"text")])},[N(t.$slots,"icon",{},()=>[t.icon?(n(),E(e(x),{key:0,class:o(e(a).e("icon-inner"))},{default:k(()=>[(n(),E(oe(t.icon)))]),_:1},8,["class"])):e(m)==="success"?(n(),E(e(x),{key:1,class:o([e(a).e("icon-inner"),e(a).is("status")])},{default:k(()=>[b(e(ue))]),_:1},8,["class"])):e(m)==="error"?(n(),E(e(x),{key:2,class:o([e(a).e("icon-inner"),e(a).is("status")])},{default:k(()=>[b(e(ce))]),_:1},8,["class"])):e(u)?h("v-if",!0):(n(),c("div",{key:3,class:o(e(a).e("icon-inner"))},P(r.value+1),3))])],2)],2),h(" title & description "),w("div",{class:o(e(a).e("main"))},[w("div",{class:o([e(a).e("title"),e(a).is(e(m))])},[N(t.$slots,"title",{},()=>[T(P(t.title),1)])],2),e(u)?(n(),c("div",{key:0,class:o(e(a).e("arrow"))},null,2)):(n(),c("div",{key:1,class:o([e(a).e("description"),e(a).is(e(m))])},[N(t.$slots,"description",{},()=>[T(P(t.description),1)])],2))],2)],6))}});var Y=O(Ee,[["__file","item.vue"]]);const ke=pe(he,{Step:Y}),$e=ve(Y),we={style:{"max-width":"600px"}},Ne={key:0},be={key:0},Re=B({__name:"StepForm",props:{steps:{},formRefs:{}},emits:["handleSubmit"],setup(f,{emit:S}){const a=f,{steps:r,formRefs:d}=de(a),p=S,s=I(0),y=()=>{d.value[s.value].value?.validate(l=>{l&&(s.value++,s.value===r.value.length&&p("handleSubmit"))})};return(i,l)=>{const m=$e,V=ke,g=te;return n(),c("div",we,[b(V,{active:s.value,"finish-status":"success","align-center":""},{default:k(()=>[(n(!0),c(q,null,F(e(r),(C,u)=>(n(),E(m,{key:u,title:C.title},null,8,["title"]))),128))]),_:1},8,["active"]),(n(!0),c(q,null,F(e(r),(C,u)=>(n(),c("div",{key:u,class:"mt"},[s.value===u?(n(),c("div",Ne,[N(i.$slots,`step-${u}`)])):h("",!0)]))),128)),s.value<e(r).length?(n(),c("div",be,[s.value>0?(n(),E(g,{key:0,onClick:l[0]||(l[0]=C=>s.value--)},{default:k(()=>[...l[1]||(l[1]=[T("上一步",-1)])]),_:1})):h("",!0),b(g,{type:"primary",onClick:y},{default:k(()=>[T(P(s.value===e(r).length-1?"提交":"下一步"),1)]),_:1})])):h("",!0)])}}});export{Re as _};
