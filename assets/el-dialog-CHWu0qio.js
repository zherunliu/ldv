import{r as I,z as _,aa as J,A as G,h as j,_ as H,e as S,R as Q,y as q,f as L,j as N,o as P,U as R,N as X,l as k,s as h,m as e,ah as Z,K as A,p as b,k as O,q as x,bp as ee,E as oe,n as V,v as se,u as te,Y as ae,P as K,a5 as le,O as ne,a6 as re,B as ie,t as de}from"./index-DNL56yZ_.js";import{b as ce,c as ue,e as W,d as fe,a as me,u as ve,E as pe,f as ge}from"./el-overlay-3WHg2bpZ.js";import{F as he,g as be,h as Ce}from"./el-popper-DB-QFI-H.js";import{c as ye}from"./refs-D6FW0B1r.js";import{c as we}from"./el-button-jLyDYas5.js";const Ee=(i,m,r,$)=>{const a={offsetX:0,offsetY:0},d=I(!1),C=(l,n)=>{if(i.value){const{offsetX:p,offsetY:g}=a,c=i.value.getBoundingClientRect(),u=c.left,s=c.top,f=c.width,E=c.height,M=document.documentElement.clientWidth,F=document.documentElement.clientHeight,Y=-u+p,z=-s+g,T=M-u-f+p,B=F-s-(E<F?E:0)+g;$?.value||(l=Math.min(Math.max(l,Y),T),n=Math.min(Math.max(n,z),B)),a.offsetX=l,a.offsetY=n,i.value.style.transform=`translate(${j(l)}, ${j(n)})`}},v=l=>{const n=l.clientX,p=l.clientY,{offsetX:g,offsetY:c}=a,u=f=>{d.value||(d.value=!0);const E=g+f.clientX-n,M=c+f.clientY-p;C(E,M)},s=()=>{d.value=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",s)},t=()=>{m.value&&i.value&&(m.value.addEventListener("mousedown",v),window.addEventListener("resize",w))},y=()=>{m.value&&i.value&&(m.value.removeEventListener("mousedown",v),window.removeEventListener("resize",w))},D=()=>{a.offsetX=0,a.offsetY=0,i.value&&(i.value.style.transform="")},w=()=>{const{offsetX:l,offsetY:n}=a;C(l,n)};return _(()=>{J(()=>{r.value?t():y()})}),G(()=>{y()}),{isDragging:d,resetPosition:D,updatePosition:w}},ke=S({name:"ElDialogContent"}),$e=S({...ke,props:ue,emits:ce,setup(i,{expose:m}){const r=i,{t:$}=Q(),{Close:a}=ee,{dialogRef:d,headerRef:C,bodyId:v,ns:t,style:y}=q(W),{focusTrapRef:D}=q(he),w=ye(D,d),l=L(()=>!!r.draggable),n=L(()=>!!r.overflow),{resetPosition:p,updatePosition:g,isDragging:c}=Ee(d,C,l,n),u=L(()=>[t.b(),t.is("fullscreen",r.fullscreen),t.is("draggable",l.value),t.is("dragging",c.value),t.is("align-center",!!r.alignCenter),{[t.m("center")]:r.center}]);return m({resetPosition:p,updatePosition:g}),(s,f)=>(P(),N("div",{ref:e(w),class:h(e(u)),style:V(e(y)),tabindex:"-1"},[R("header",{ref_key:"headerRef",ref:C,class:h([e(t).e("header"),s.headerClass,{"show-close":s.showClose}])},[k(s.$slots,"header",{},()=>[R("span",{role:"heading","aria-level":s.ariaLevel,class:h(e(t).e("title"))},Z(s.title),11,["aria-level"])]),s.showClose?(P(),N("button",{key:0,"aria-label":e($)("el.dialog.close"),class:h(e(t).e("headerbtn")),type:"button",onClick:E=>s.$emit("close")},[A(e(oe),{class:h(e(t).e("close"))},{default:b(()=>[(P(),O(x(s.closeIcon||e(a))))]),_:1},8,["class"])],10,["aria-label","onClick"])):X("v-if",!0)],2),R("div",{id:e(v),class:h([e(t).e("body"),s.bodyClass])},[k(s.$slots,"default")],10,["id"]),s.$slots.footer?(P(),N("footer",{key:0,class:h([e(t).e("footer"),s.footerClass])},[k(s.$slots,"footer")],2)):X("v-if",!0)],6))}});var De=H($e,[["__file","dialog-content.vue"]]);const Pe=S({name:"ElDialog",inheritAttrs:!1}),Me=S({...Pe,props:me,emits:fe,setup(i,{expose:m}){const r=i,$=se();we({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!$.title));const a=te("dialog"),d=I(),C=I(),v=I(),{visible:t,titleId:y,bodyId:D,style:w,overlayDialogStyle:l,rendered:n,transitionConfig:p,zIndex:g,_draggable:c,_alignCenter:u,_overflow:s,handleClose:f,onModalClick:E,onOpenAutoFocus:M,onCloseAutoFocus:F,onCloseRequested:Y,onFocusoutPrevented:z}=ve(r,d);ie(W,{dialogRef:d,headerRef:C,bodyId:D,ns:a,rendered:n,style:w});const T=ge(E),B=L(()=>r.modalPenetrable&&!r.modal&&!r.fullscreen);return m({visible:t,dialogContentRef:v,resetPosition:()=>{var o;(o=v.value)==null||o.resetPosition()},handleClose:f}),(o,Fe)=>(P(),O(e(Ce),{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},{default:b(()=>[A(ae,K(e(p),{persisted:""}),{default:b(()=>{var U;return[le(A(e(pe),{"custom-mask-event":"",mask:o.modal,"overlay-class":[(U=o.modalClass)!=null?U:"",`${e(a).namespace.value}-modal-dialog`,e(a).is("penetrable",e(B))],"z-index":e(g)},{default:b(()=>[R("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(y),"aria-describedby":e(D),class:h(`${e(a).namespace.value}-overlay-dialog`),style:V(e(l)),onClick:e(T).onClick,onMousedown:e(T).onMousedown,onMouseup:e(T).onMouseup},[A(e(be),{loop:"",trapped:e(t),"focus-start-el":"container",onFocusAfterTrapped:e(M),onFocusAfterReleased:e(F),onFocusoutPrevented:e(z),onReleaseRequested:e(Y)},{default:b(()=>[e(n)?(P(),O(De,K({key:0,ref_key:"dialogContentRef",ref:v},o.$attrs,{center:o.center,"align-center":e(u),"close-icon":o.closeIcon,draggable:e(c),overflow:e(s),fullscreen:o.fullscreen,"header-class":o.headerClass,"body-class":o.bodyClass,"footer-class":o.footerClass,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(f)}),ne({header:b(()=>[o.$slots.title?k(o.$slots,"title",{key:1}):k(o.$slots,"header",{key:0,close:e(f),titleId:e(y),titleClass:e(a).e("title")})]),default:b(()=>[k(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:b(()=>[k(o.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):X("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[re,e(t)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Te=H(Me,[["__file","dialog.vue"]]);const ze=de(Te);export{ze as E};
